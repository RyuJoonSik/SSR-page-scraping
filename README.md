# SSR 페이지 스크래핑
![products-load](https://user-images.githubusercontent.com/71337000/131956703-8dc0f66d-ab22-4012-bd35-972510d2422b.gif)

가족의 요청으로 시작하게 되었습니다. 키워드 검색 후 나열된 제품 목록에 직접 들어가지 않고 필요한 정보를 엑셀로 추출할 수 없는 지 였습니다. 현재에 이르기까지의 과정은 다음과 같습니다. 

### 크롬 Listly
필요한 페이지에 직접 접속해야하므로 불편했습니다.

### 엑셀 + Selenium
로직을 직접 짤 수 있지만, 속도가 느리고 VBA가 익숙하지 않아 불편했습니다.

### node.js + Puppeteer
속도가 빨라 진것 같진 않았고, node.js의 설치부터 CLI를 통한 실행까지 사용자로써 불편함을 느낄 수도 있을 것이라 생각했습니다. 그리고 페이지 전체가 로딩될때까지 기다려야하는 상황(CSR)일 경우 Puppeteer를 사용한다는 글들을 보았습니다.

확인 해 본 결과 필요한 정보들은 SSR 응답만으로도 충분했습니다. 그렇다면 client-side에서 AJAX를 통해 받은 내용들을 원하는 대로 사용하면 되겠지라고 생각했지만 CORS에 의해 막혔습니다. 무료 프록시 서버를 사용해 보았지만 평일에는 속도가 너무 느려 도저히 못 사용할 정도였습니다. 직접 서버를 구현하기에는 다루는 기술 범위가 넓어져 시간이 오래 걸릴 것 이기에 마지막 방법으로 생각해두었습니다. 찾아보니 크롬에 설정을 하면 CORS를 우회할 수 있는 방법이 있었습니다. 이 방법을 통해 개발을 진행 해 보기로 하였습니다.

### 리액트
개발 편이를 위해 리액트를 사용했습니다. 현업에서는 클래스형 컴포넌트와 함수형 컴포넌트 중 어떤 것을 사용 할 지 모르기에 둘 다 사용 해보기로 했습니다. 시작은 클래스형 컴포넌트를 사용했고 느낀 장점은 생명 주기 메서드들을 통해 컴포넌트의 렌더링을 제어하기 편했습니다. 단점은 this가 사용 된 메서드에 바인딩을 신경써주어야 하는 점이었습니다.

### 현재
함수형 컴포넌트로 수정하고 테스트 코드를 작성해 보며 진행하고있습니다. 다른 사람이 사용하는 것이다 보니 코드에 대한 확신이 서지 않아서였습니다. 여러 훅들을 사용 해 보았고, useContext와 useReducer를 통해 전역 상태 관리가 가능하도록 하였습니다. 클래스형에 비해 코드가 간단해져서 좋았지만 생명주기 메서드를 사용 못 해 불필요한 렌더링을 어떻게 줄일 수 있을지에 대해 알아가고 있습니다.

## UI
![스크린샷(473)](https://user-images.githubusercontent.com/71337000/131967269-510440fb-f068-45f9-a6cf-bb48f3fcde31.png)
🔍 : 스크래핑 페이지 URL에 입력 된 키워드를 더하여 요청  
😎 : 키워드  
📄 : 해당 키워드의 제품 페이지 수


![스크린샷(475)](https://user-images.githubusercontent.com/71337000/131968127-e23d7033-fd7d-4625-a4b1-5b54a38f76d8.png)  
⭐4.9 : 제품 평점  
👨‍👩‍👦‍👦73654 : 제품 리뷰 수  
✔️ : 제품 재고 상태  
$6.00 : 제품 가격  
$3.60 : 제품 할인 가격  
🔗 : 제품 링크  
📷 : 제품 이미지 다운  
💊 : 제품 성분표 다운  
🟦 : 제품 체크박스(엑셀 출력 시 사용)

![스크린샷(477)](https://user-images.githubusercontent.com/71337000/131968761-0c64067b-6a88-4143-b7b1-c57783b49ccd.png)  
vitamin : 검색한 키워드  
<< 버튼 : 1페이지로 이동  
< 버튼 : 이전 페이지로 이동  
&gt; 버튼 : 다음 페이지로 이동  
&gt;&gt; 버튼 : 마지막 페이지로 이동  
GO 버튼 : 입력된 페이지로 이  
TOP 버튼 : 페이지 위로  
BOTTOM 버튼 : 페이지 아래로  
All check : 해당 페이지 제품 전체 체크  
Excel export : 체크된 페이지 엑셀로 출력

